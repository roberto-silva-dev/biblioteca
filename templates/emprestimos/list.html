{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Empréstimos</h2>
  <a href="/emprestimos/novo/" class="btn btn-success">Novo Empréstimo</a>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Livro</th>
      <th>Leitor</th>
      <th>Data Empréstimo</th>
      <th>Devolução</th>
      <th class="text-end">Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for emp in emprestimos %}
    <tr>
      <td>{{ emp.livro.titulo }}</td>
      <td>{{ emp.leitor.nome }}</td>
      <td>{{ emp.data_emprestimo }}</td>
      <td>
        {% if emp.data_devolucao %}
          {{ emp.data_devolucao }}
        {% else %}
          <span class="badge text-bg-warning">Em aberto</span>
        {% endif %}
      </td>
      <td class="text-end">
        {% if not emp.data_devolucao %}
        <a href="/emprestimos/{{ emp.id }}/devolver/" class="btn btn-sm btn-primary" onclick="return confirmarAcao('Confirmar devolução?');">Marcar devolução</a>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center">Nenhum empréstimo encontrado.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}